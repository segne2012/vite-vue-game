var B=Object.defineProperty;var T=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var k=(r,i,s)=>i in r?B(r,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[i]=s,D=(r,i)=>{for(var s in i||(i={}))C.call(i,s)&&k(r,s,i[s]);if(T)for(var s of T(i))L.call(i,s)&&k(r,s,i[s]);return r};var u=(r,i,s)=>(k(r,typeof i!="symbol"?i+"":i,s),s);import{d as N,i as E,p as m,q as V,s as q,o as b,a as x,b as v,F as U,k as j,v as g,u as l,m as z,t as G,l as H}from"./vendor.53b61c91.js";const O={key:0,class:"winTip"},J=N({setup(r){let i=E(50),s=E(50);class F{constructor(e=0,t=0,a=3){u(this,"x");u(this,"y");u(this,"length");u(this,"direction");u(this,"body");this.x=e,this.y=t,this.length=a,this.direction="right",this.body=[];for(let w=a-1;w>=0;w--)this.body.push({x:e+w,y:t})}move(){const e=this.body[0],t=D({},e);switch(this.direction){case"right":t.x++;break;case"left":t.x--;break;case"up":t.y--;break;case"down":t.y++;break}this.x=t.x,this.y=t.y,this.beforeMove()&&(this.body.unshift(t),this.body.pop())}eat(){this.length++,this.body.length++,p()}changeDirection(e){this.direction=e}beforeMove(){if(this.direction==="right"&&this.x>i.value-1)return this.length=0,!1;if(this.direction==="left"&&this.x<0)return this.length=0,!1;if(this.direction==="up"&&this.y<0)return this.length=0,!1;if(this.direction==="down"&&this.y>s.value-1)return this.length=0,!1;for(let e=1;e<this.body.length;e++)if(this.body[0].x===this.body[e].x&&this.body[0].y===this.body[e].y)return this.length=0,!1;return d.x===this.body[0].x&&d.y===this.body[0].y&&this.eat(),!0}reset(){this.x=0,this.y=0,this.length=3,this.direction="right",this.body=[];for(let e=this.length-1;e>=0;e--)this.body.push({x:0+e,y:0})}}let o=m(new F(0,0,3)),d=m({x:0,y:0}),h=null,S=500,_=1,f=0;function M(){if(f===0)f=Date.now();else{let n=Date.now(),e=n-f,t=S*(100-_)/100,a=t<30?30:t;e>a&&(f=n,h&&(o&&o.changeDirection(h),h=null),o&&o.move(),_=Math.floor(o.length))}window.requestAnimationFrame(()=>{o&&o.length>0?M():(console.log("\u6E38\u620F\u7ED3\u675F"),y.isShowTitle=!0)})}function A(){o.reset(),p(),M(),y.isShowTitle=!1}function c(n){switch(n){case"up":o&&o.direction!=="down"&&(h=n);break;case"down":o&&o.direction!=="up"&&(h=n);break;case"left":o&&o.direction!=="right"&&(h=n);break;case"right":o&&o.direction!=="left"&&(h=n);break}}function p(){let n=Math.floor(Math.random()*i.value),e=Math.floor(Math.random()*s.value),t=!1;o.body.forEach(a=>{a.x===n&&a.y===e&&(t=!0)}),t?p():(d.x=n,d.y=e)}let y=m({isShowTitle:!0,title:"\u8D2A\u5403\u86C7"});return V(()=>{document.addEventListener("keydown",n=>{switch(n.key){case"ArrowUp":c("up");break;case"ArrowDown":c("down");break;case"ArrowLeft":c("left");break;case"ArrowRight":c("right");break}c(n.key)})}),q(()=>{document.removeEventListener("keydown",n=>{c(n.key)})}),(n,e)=>(b(),x("div",{class:"gluttonous",style:g({height:l(s)*10+"px"})},[v("div",{class:"snake",style:g({width:l(i)*10+"px",height:l(s)*10+"px"})},[(b(!0),x(U,null,j(l(o).body,(t,a)=>(b(),x("div",{class:"body",key:a,style:g({left:t.x*10+"px",top:t.y*10+"px"})},null,4))),128)),v("div",{class:"food",style:g({left:l(d).x*10+"px",top:l(d).y*10+"px"})},null,4)],4),l(y).isShowTitle?(b(),x("div",O,[z(G(l(y).title)+" ",1),v("button",{onClick:A},"\u5F00\u59CB\u6E38\u620F")])):H("",!0)],4))}});export{J as default};
